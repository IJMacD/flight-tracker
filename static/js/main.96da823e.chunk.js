(window["webpackJsonpflight-tracker"]=window["webpackJsonpflight-tracker"]||[]).push([[0],{10:function(t,e,n){t.exports=n(19)},15:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){t.exports=n.p+"static/media/map_outline.d32ef63b.png"},19:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(4),o=n.n(i),c=(n(15),n(1)),l=n.n(c),u=n(2),s=n(5),h=n(6),f=n(8),m=n(7),g=n(9);n(17);function d(t,e,n){return{x:(e-t.min_lon)/(t.max_lon-t.min_lon)*t.width,y:(n-t.min_lat)/(t.max_lat-t.min_lat)*t.height}}var v={min_lon:113.8,min_lat:22.1,max_lon:114.5,max_lat:22.6,width:1e3,height:800};function p(t){var e=t.aircraft,a=t.myLocation,i=r.a.useRef();return r.a.useEffect(function(){if(i.current){var t=i.current.getContext("2d");if(t.clearRect(0,0,v.width,v.height),a){var n=d(v,a.longitude,a.latitude),r=n.x,o=n.y;t.fillStyle="#F00",t.beginPath(),t.arc(r,v.height-o,1,0,2*Math.PI),t.fill()}t.strokeStyle="#C0F0C0",t.fillStyle="#F0F0C0";var c=!0,l=!1,u=void 0;try{for(var s,h=e[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){var f=s.value,m=d(v,f.longitude,f.latitude),g=m.x,p=m.y,y=f.true_track*Math.PI/180,_=5*Math.sin(y),w=5*Math.cos(y),x=Math.sin(y)*f.velocity*.1,k=Math.cos(y)*f.velocity*.1;t.beginPath(),t.moveTo(g+_,v.height-p-w),t.lineTo(g+x,v.height-p-k),t.stroke(),t.fillText(f.callsign,g+10,v.height-p),t.fillText("".concat((b=f.geo_altitude,String(.0328084*b|0).padStart(3,"0"))," ").concat(.194384*f.velocity|0),g+10,v.height-p+12),t.save(),t.translate(g,v.height-p),t.rotate(y),t.fillText("\ud83d\udee7\ufe0f",-5,4),t.restore()}}catch(S){l=!0,u=S}finally{try{c||null==h.return||h.return()}finally{if(l)throw u}}}var b}),r.a.createElement("canvas",{ref:i,width:v.width,height:v.height,style:{backgroundImage:"url(".concat(n(18),")"),backgroundSize:"100%"}})}var y={min_lon:113.8,min_lat:22.1,max_lon:114.5,max_lat:22.6,width:543,height:421},_=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(f.a)(this,Object(m.a)(e).call(this,t))).state={aircraft:[]},n}return Object(g.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=function(){var e=Object(u.a)(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(y);case 2:n=e.sent,t.setState({aircraft:n});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();e(),this.timeout=setInterval(e,1e4),navigator.geolocation.getCurrentPosition(function(e){t.setState({myLocation:e.coords})})}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeout)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p,{aircraft:this.state.aircraft,myLocation:this.state.myLocation}))}}]),e}(r.a.Component);function w(t){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(l.a.mark(function t(e){var n,a,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://opensky-network.org/api/states/all?lamin=".concat(e.min_lat,"&lomin=").concat(e.min_lon,"&lamax=").concat(e.max_lat,"&lomax=").concat(e.max_lon));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,r=["icao24","callsign","origin_country","time_position","last_contact","longitude","latitude","baro_altitude","on_ground","velocity","true_track","vertical_rate","sensors","geo_altitude","squawk","spi","position_source"],t.abrupt("return",a.states.map(function(t){return k(r,t)}));case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function k(t,e){for(var n={},a=0;a<t.length&&a<e.length;a++)n[t[a]]=e[a];return n}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.96da823e.chunk.js.map